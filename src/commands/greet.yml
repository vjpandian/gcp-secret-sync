---
description: >
  This is a sample executor using Docker and Node for running applications

# What will this command do?
# Descriptions should be short, simple, and clear.

description: >
  Fetch secrets and mask them

parameters:
  secret-name:
    type: string
    description: "Secrets Manager secret name"
  circle-hostname:
    type: string
    default: "circleci.com"
  circle-token:
    type: env_var_name
    description: "Environment Variable for CircleCI Token"

steps:
  - run:
      environment:
        SECRET_NAME: <<parameters.secret-name>>
        CIRCLE_HOSTNAME: <<parameters.circle-hostname>>
        CIRCLE_TOKEN: <<parameters.circle-token>>
      name: Fetch Secrets from GCP Secrets Manager
      command: <<include(scripts/sync-secrets.sh)>>
